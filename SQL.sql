-- Таблица Типы затрат
CREATE TABLE Типы_затрат (
    Код_типа_затрат SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Источники финансирования
CREATE TABLE Источники_финансирования (
    Код_источника SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Категории расходов
CREATE TABLE Категории_расходов (
    Код_категории SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL,
    Код_типа INT NOT NULL REFERENCES Типы_затрат(Код_типа_затрат),
    Код_источника INT NOT NULL REFERENCES Источники_финансирования(Код_источника)
);

-- Таблица Этапы разработки контента
CREATE TABLE Этапы_разработки_контента (
    Код_этапа SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Тип дисциплины
CREATE TABLE Тип_дисциплины (
    Код_типа_дисциплины SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Дисциплины
CREATE TABLE Дисциплины (
    Код_дисциплины SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL,
    Количество_часов INT NOT NULL,
    Код_типа INT NOT NULL REFERENCES Тип_дисциплины(Код_типа_дисциплины)
);

-- Таблица Факультеты
CREATE TABLE Факультеты (
    Код_факультета SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Кафедры
CREATE TABLE Кафедры (
    Код_кафедры SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL,
    Код_факультета INT NOT NULL REFERENCES Факультеты(Код_факультета)
);

-- Таблица Должности
CREATE TABLE Должности (
    Код_должности SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Звание
CREATE TABLE Звание (
    Код_звания SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Тип контента
CREATE TABLE Тип_контента (
    Код_типа_контента SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Роли разработчика контента
CREATE TABLE Роли_разработчика_контента (
    Код_роли SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Разработчики контента
CREATE TABLE Разработчики_контента (
    Код_разработчика SERIAL PRIMARY KEY,
    ФИО TEXT NOT NULL,
    Код_кафедры INT NOT NULL REFERENCES Кафедры(Код_кафедры),
    Код_должности INT NOT NULL REFERENCES Должности(Код_должности),
    Код_звания INT NOT NULL REFERENCES Звание(Код_звания),
    Код_роли INT NOT NULL REFERENCES Роли_разработчика_контента(Код_роли)
);

-- Таблица Объекты размещения контента
CREATE TABLE Объекты_размещения_контента (
    Код_объекта SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL
);

-- Таблица Проекты
CREATE TABLE Проекты (
    Код_проекта SERIAL PRIMARY KEY,
    Наименование TEXT NOT NULL,
    Код_дисциплины INT NOT NULL REFERENCES Дисциплины(Код_дисциплины),
    Код_разработчика INT NOT NULL REFERENCES Разработчики_контента(Код_разработчика),
    Код_типа_контента INT NOT NULL REFERENCES Тип_контента(Код_типа_контента),
    Код_объекта INT NOT NULL REFERENCES Объекты_размещения_контента(Код_объекта)
);

-- Таблица Акт приемки
CREATE TABLE Акт_приемки (
    Номер_акта SERIAL PRIMARY KEY,
    Дата DATE NOT NULL,
    Код_проекта INT NOT NULL REFERENCES Проекты(Код_проекта),
    Результат_приемки TEXT NOT NULL,
    Примечание TEXT
);

-- Таблица План распределения затрат
CREATE TABLE План_распределения_затрат (
    Номер_плана SERIAL PRIMARY KEY,
    Дата_создания DATE NOT NULL,
    Код_проекта INT NOT NULL REFERENCES Проекты(Код_проекта),
    Затраты DECIMAL(15, 2) NOT NULL,
    Код_этапа INT NOT NULL REFERENCES Этапы_разработки_контента(Код_этапа),
    Код_категории INT NOT NULL REFERENCES Категории_расходов(Код_категории)
);

-- Таблица График выполнения работ
CREATE TABLE График_выполнения_работ (
    Номер SERIAL PRIMARY KEY,
    Дата_утверждения DATE NOT NULL,
    Код_этапа INT NOT NULL REFERENCES Этапы_разработки_контента(Код_этапа),
    Дата_выполнения DATE NOT NULL,
    Код_проекта INT NOT NULL REFERENCES Проекты(Код_проекта)
);

-- Таблица Заявка на размещение проекта
CREATE TABLE Заявка_на_размещение_проекта (
    Номер_заявки SERIAL PRIMARY KEY,
    Дата_заявки DATE NOT NULL,
    Код_проекта INT NOT NULL REFERENCES Проекты(Код_проекта)
);

-- Таблица Смета проекта
CREATE TABLE Смета_проекта (
    Номер_сметы SERIAL PRIMARY KEY,
    Дата_утверждения DATE NOT NULL,
    Код_проекта INT NOT NULL REFERENCES Проекты(Код_проекта),
    Код_разработчика INT NOT NULL REFERENCES Разработчики_контента(Код_разработчика)
);



 
-- Заполнение справочных таблиц
INSERT INTO "Типы_затрат" ("Код_типа_затрат", "Наименование") VALUES
(1, 'Постоянные'),
(2, 'Переменные');

INSERT INTO "Источники_финансирования" ("Код_источника", "Наименование") VALUES
(1, 'Государственное финансирование'),
(2, 'Гранты'),
(3, 'Собственные средства'),
(4, 'Инвесторы');

INSERT INTO "Категории_расходов" ("Код_категории", "Наименование", "Код_типа", "Код_источника") VALUES
(1, 'Закупка компьютеров', 1, 1),
(2, 'Лицензии ПО', 2, 2),
(3, 'Зарплата разработчиков', 2, 1),
(4, 'Обучение сотрудников', 1, 2);

INSERT INTO "Этапы_разработки_контента" ("Код_этапа", "Наименование") VALUES
(1, 'Идея'),
(2, 'Проектирование'),
(3, 'Разработка'),
(4, 'Тестирование'),
(5, 'Релиз');

INSERT INTO "Тип_дисциплины" ("Код_типа_дисциплины", "Наименование") VALUES
(1, 'Техническая'),
(2, 'Гуманитарная'),
(3, 'Естественнонаучная'),
(4, 'Математическая');

INSERT INTO "Дисциплины" ("Код_дисциплины", "Наименование", "Количество_часов", "Код_типа") VALUES
(1, 'Программирование', 120, 1),
(2, 'Философия', 90, 2),
(3, 'Физика', 100, 3),
(4, 'Математика', 110, 4);

INSERT INTO "Факультеты" ("Код_факультета", "Наименование") VALUES
(1, 'Факультет ИТ'),
(2, 'Факультет управления'),
(3, 'Юридический факультет');

INSERT INTO "Кафедры" ("Код_кафедры", "Наименование", "Код_факультета") VALUES
(1, 'Кафедра ИС', 1),
(2, 'Кафедра менеджмента', 2),
(3, 'Кафедра права', 3);

INSERT INTO "Должности" ("Код_должности", "Наименование") VALUES
(1, 'Преподаватель'),
(2, 'Доцент'),
(3, 'Профессор');

INSERT INTO "Звание" ("Код_звания", "Наименование") VALUES
(1, 'Кандидат наук'),
(2, 'Доктор наук');

INSERT INTO "Тип_контента" ("Код_типа_контента", "Наименование") VALUES
(1, 'Текст'),
(2, 'Видео'),
(3, 'Презентация'),
(4, 'Веб страница');

INSERT INTO "Роли_разработчика_контента" ("Код_роли", "Наименование") VALUES
(1, 'Руководитель проекта'),
(2, 'Разработчик'),
(3, 'Дизайнер');

INSERT INTO "Разработчики_контента" ("Код_разработчика", "ФИО", "Код_кафедры", "Код_должности", "Код_звания", "Код_роли") VALUES
(1, 'Иванов Иван Иванович', 1, 1, 1, 1),
(2, 'Петров Петр Петрович', 2, 2, 2, 2),
(3, 'Сидоров Сидор Сидорович', 3, 3, 1, 3);

INSERT INTO "Объекты_размещения_контента" ("Код_объекта", "Наименование") VALUES
(1, 'Репозиторий'),
(2, 'СДО'),
(3, 'Сайт');

-- Заполнение таблиц с документами
INSERT INTO "Проекты" ("Код_проекта", "Наименование", "Код_дисциплины", "Код_разработчика", "Код_типа_контента", "Код_объекта") VALUES
(1, 'Создание учебного курса', 1, 1, 1, 1),
(2, 'Разработка лекционного материала', 2, 2, 2, 2);

INSERT INTO "Акт_приемки" ("Номер_акта", "Дата", "Код_проекта", "Результат_приемки", "Примечание") VALUES
(1, '2024-12-01', 1, 'Принято', 'Все требования выполнены'),
(2, '2024-12-02', 2, 'Принято с доработками', 'Требуется исправить ошибки в тексте');

INSERT INTO "План_распределения_затрат" ("Номер_плана", "Дата_создания", "Код_проекта", "Затраты", "Код_этапа", "Код_категории") VALUES
(1, '2024-12-03', 1, 50000, 1, 1),
(2, '2024-12-04', 2, 75000, 2, 2);

INSERT INTO "График_выполнения_работ" ("Номер", "Дата_утверждения", "Код_этапа", "Дата_выполнения", "Код_проекта") VALUES
(1, '2024-12-05', 3, '2024-12-20', 1),
(2, '2024-12-06', 4, '2024-12-25', 2);

INSERT INTO "Заявка_на_размещение_проекта" ("Номер_заявки", "Дата_заявки", "Код_проекта") VALUES
(1, '2024-12-07', 1),
(2, '2024-12-08', 2);

INSERT INTO "Смета_проекта" ("Номер_сметы", "Дата_утверждения", "Код_проекта", "Код_разработчика") VALUES
(1, '2024-12-09', 1, 1),
(2, '2024-12-10', 2, 2);

